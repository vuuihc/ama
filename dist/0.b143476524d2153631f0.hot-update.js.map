{"version":3,"sources":["webpack:///0.b143476524d2153631f0.hot-update.js","webpack:///./src/javascripts/containers/blocks/QuestionItemWithAvatar.js?6c9f","webpack:///./src/javascripts/containers/HotQuestionList.js?651f"],"names":["webpackHotUpdate","199","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_reactRouter","_toast","e","Error","code","_toast2","_config","_apiHandler","_apiHandler2","QuestionItemWithAvatar","_Component","this","_this","getPrototypeOf","state","loading","answerId","questionId","isPayed","browserHistory","push","baseUrl","handleLoading","fetch","domain","credentials","then","response","json","handleResponse","data","undefined","timeStamp","time","Date","valueOf","onBridgeReady","WeixinJSBridge","invoke","res","err_msg","console","log","alert","JSON","stringify","document","removeEventListener","attachEvent","detachEvent","addEventListener","url","question","createElement","icon","show","Link","to","question_id","className","question_content","teacher_id","src","teacher_face","teacher_name","user_title","onClick","bubbleClick","bind","answer_id","answer_ispayed","question_prize","answer_listen","answer_like","Component","defaultProps","285","mapStateToProps","hotQuestionList","listenInfo","landPage","_reactRedux","_question","_Loading","_Loading2","_QuestionItemWithAvatar","_QuestionItemWithAvatar2","HotQuestionList","curAudio","curPage","handleScroll","window","scrollY","innerHeight","body","clientHeight","completed","setState","dispatch","getHotQuestionList","setLandPage","location","href","refs","_this2","_props","map","index","propTypes","PropTypes","shape","isRequired","contextTypes","router","object","connect"],"mappings":"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","file":"0.b143476524d2153631f0.hot-update.js","sourcesContent":["webpackHotUpdate(0,{\n\n/***/ 199:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(3);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRouter = __webpack_require__(18);\n\t\n\tvar _toast = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"../util/weui/toast\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tvar _toast2 = _interopRequireDefault(_toast);\n\t\n\tvar _config = __webpack_require__(16);\n\t\n\tvar _apiHandler = __webpack_require__(90);\n\t\n\tvar _apiHandler2 = _interopRequireDefault(_apiHandler);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar QuestionItemWithAvatar = function (_Component) {\n\t    _inherits(QuestionItemWithAvatar, _Component);\n\t\n\t    function QuestionItemWithAvatar() {\n\t        _classCallCheck(this, QuestionItemWithAvatar);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(QuestionItemWithAvatar).call(this));\n\t\n\t        _this.state = {\n\t            loading: false\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    _createClass(QuestionItemWithAvatar, [{\n\t        key: 'bubbleClick',\n\t        value: function bubbleClick(answerId, questionId, isPayed) {\n\t            var self = this;\n\t            if (isPayed) {\n\t                _reactRouter.browserHistory.push(_config.baseUrl + 'question/' + questionId);\n\t            } else {\n\t                //取预支付订单\n\t                self.props.handleLoading(true);\n\t                fetch(_config.domain + '/api/v1/answer/listen?answer_id=' + answerId, {\n\t                    credentials: 'same-origin'\n\t                }).then(function (response) {\n\t                    return response.json();\n\t                }).then(function (json) {\n\t                    return _apiHandler2.default.handleResponse(json, function (data) {\n\t                        self.props.handleLoading(false);\n\t                        if (data.timeStamp != undefined) {\n\t                            var time = new Date();\n\t                            // alert('nexstate:' + data.timeStamp + '' + (time.valueOf()/1000 - data.timeStamp));\n\t                            if (time.valueOf() / 1000 - data.timeStamp < 1000) {\n\t                                (function () {\n\t                                    // alert('enter pay');\n\t\n\t                                    var onBridgeReady = function onBridgeReady() {\n\t                                        WeixinJSBridge.invoke('getBrandWCPayRequest', data, function (res) {\n\t                                            if (res.err_msg == \"get_brand_wcpay_request:ok\") {\n\t                                                console.log(\"支付成功！\");\n\t                                                _reactRouter.browserHistory.push(_config.baseUrl + 'question/' + questionId);\n\t                                            } else {\n\t                                                // browserHistory.push(`${baseUrl}question/${questionId}`)\n\t                                                alert(\"支付失败，原因：\" + JSON.stringify(res));\n\t                                            }\n\t                                            if (document.removeEventListener) {\n\t                                                document.removeEventListener('WeixinJSBridgeReady', onBridgeReady);\n\t                                            } else if (document.attachEvent) {\n\t                                                document.detachEvent('WeixinJSBridgeReady', onBridgeReady);\n\t                                                document.detachEvent('onWeixinJSBridgeReady', onBridgeReady);\n\t                                            }\n\t                                            // 使用以上方式判断前端返回,微信团队郑重提示：res.err_msg将在用户支付成功后返回    ok，但并不保证它绝对可靠。\n\t                                        });\n\t                                    };\n\t\n\t                                    console.log(\"进入微信支付\");\n\t                                    if (typeof WeixinJSBridge == \"undefined\") {\n\t                                        if (document.addEventListener) {\n\t                                            document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n\t                                        } else if (document.attachEvent) {\n\t                                            document.attachEvent('WeixinJSBridgeReady', onBridgeReady);\n\t                                            document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n\t                                        }\n\t                                    } else {\n\t                                        onBridgeReady();\n\t                                    }\n\t                                })();\n\t                            } else if (data.url != undefined) {\n\t                                // this.context.router.push(`question/${self.state.curQuestionId}`)\n\t                            }\n\t                        }\n\t                    });\n\t                });\n\t            }\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            var question = this.props.question;\n\t\n\t            return _react2.default.createElement(\n\t                'article',\n\t                null,\n\t                _react2.default.createElement(\n\t                    _toast2.default,\n\t                    { icon: 'loading', show: this.state.loading },\n\t                    '正在请求……'\n\t                ),\n\t                _react2.default.createElement(\n\t                    _reactRouter.Link,\n\t                    { to: _config.baseUrl + \"question/\" + question.question_id },\n\t                    _react2.default.createElement(\n\t                        'div',\n\t                        { className: 'question-content' },\n\t                        _react2.default.createElement(\n\t                            'h4',\n\t                            null,\n\t                            question.question_content\n\t                        )\n\t                    )\n\t                ),\n\t                _react2.default.createElement(\n\t                    _reactRouter.Link,\n\t                    { to: _config.baseUrl + \"tutor/\" + question.teacher_id },\n\t                    _react2.default.createElement(\n\t                        'div',\n\t                        { className: 'mentor' },\n\t                        _react2.default.createElement('img', { src: question.teacher_face }),\n\t                        _react2.default.createElement(\n\t                            'div',\n\t                            { className: 'mentor-info' },\n\t                            _react2.default.createElement(\n\t                                'span',\n\t                                { className: 'name' },\n\t                                question.teacher_name\n\t                            ),\n\t                            _react2.default.createElement(\n\t                                'span',\n\t                                null,\n\t                                question.user_title\n\t                            )\n\t                        )\n\t                    )\n\t                ),\n\t                _react2.default.createElement(\n\t                    'div',\n\t                    { className: 'answer' },\n\t                    _react2.default.createElement(\n\t                        'span',\n\t                        { className: 'bubble', onClick: this.bubbleClick.bind(this, question.answer_id, question.question_id, question.answer_ispayed) },\n\t                        _react2.default.createElement('span', { className: 'bubble-tail' }),\n\t                        _react2.default.createElement('span', { className: 'bubble-voice' }),\n\t                        _react2.default.createElement(\n\t                            'span',\n\t                            { className: 'bubble-text' },\n\t                            question.answer_ispayed ? \"点击偷偷听\" : \"1元偷偷听\"\n\t                        )\n\t                    )\n\t                ),\n\t                _react2.default.createElement(\n\t                    'div',\n\t                    { className: 'remark' },\n\t                    _react2.default.createElement(\n\t                        'div',\n\t                        { className: 'value' },\n\t                        '价值￥',\n\t                        question.question_prize\n\t                    ),\n\t                    _react2.default.createElement(\n\t                        'div',\n\t                        { className: 'remark-info' },\n\t                        _react2.default.createElement(\n\t                            'span',\n\t                            null,\n\t                            question.answer_listen,\n\t                            '人偷听'\n\t                        ),\n\t                        _react2.default.createElement(\n\t                            'span',\n\t                            { className: 'kui' },\n\t                            question.answer_like,\n\t                            '人觉得赞'\n\t                        )\n\t                    )\n\t                )\n\t            );\n\t        }\n\t    }]);\n\t\n\t    return QuestionItemWithAvatar;\n\t}(_react.Component);\n\t\n\tQuestionItemWithAvatar.defaultProps = {\n\t    question: {}, //问题\n\t    handleLoading: function handleLoading() {} //控制加载\n\t};\n\texports.default = QuestionItemWithAvatar;\n\n/***/ },\n\n/***/ 285:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(3);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(22);\n\t\n\tvar _question = __webpack_require__(89);\n\t\n\tvar _config = __webpack_require__(197);\n\t\n\tvar _Loading = __webpack_require__(73);\n\t\n\tvar _Loading2 = _interopRequireDefault(_Loading);\n\t\n\tvar _QuestionItemWithAvatar = __webpack_require__(199);\n\t\n\tvar _QuestionItemWithAvatar2 = _interopRequireDefault(_QuestionItemWithAvatar);\n\t\n\t__webpack_require__(609);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zsh on 2016/3/11.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar HotQuestionList = function (_Component) {\n\t  _inherits(HotQuestionList, _Component);\n\t\n\t  function HotQuestionList(props) {\n\t    _classCallCheck(this, HotQuestionList);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HotQuestionList).call(this, props));\n\t\n\t    _this.state = {\n\t      curAudio: \"\",\n\t      curPage: 1\n\t    };\n\t    _this.handleScroll = _this.handleScroll.bind(_this);\n\t    _this.handleLoading = _this.handleLoading.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(HotQuestionList, [{\n\t    key: 'handleScroll',\n\t    value: function handleScroll() {\n\t      if (window.scrollY + window.innerHeight == document.body.clientHeight && !this.props.hotQuestionList.completed) {\n\t        var curPage = ++this.state.curPage;\n\t        this.setState({ curPage: curPage });\n\t        this.props.dispatch((0, _question.getHotQuestionList)(curPage, 10));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'handleLoading',\n\t    value: function handleLoading(state) {\n\t      this.setState({ loading: state });\n\t    }\n\t  }, {\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      if (this.props.landPage == null) {\n\t        this.props.dispatch((0, _config.setLandPage)(location.href));\n\t      }\n\t      this.props.dispatch((0, _question.getHotQuestionList)(1, 10));\n\t      document.addEventListener('scroll', this.handleScroll);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      document.removeEventListener('scroll', this.handleScroll);\n\t      console.log(this.refs);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      var _props = this.props;\n\t      var hotQuestionList = _props.hotQuestionList;\n\t      var listenInfo = _props.listenInfo;\n\t\n\t      return _react2.default.createElement(\n\t        'main',\n\t        { className: 'hot-question-list' },\n\t        hotQuestionList.data.map(function (question, index) {\n\t          return _react2.default.createElement(_QuestionItemWithAvatar2.default, { question: question, key: index, handleLoading: _this2.handleLoading });\n\t        }),\n\t        !hotQuestionList.completed && _react2.default.createElement(_Loading2.default, null)\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return HotQuestionList;\n\t}(_react.Component);\n\t\n\tHotQuestionList.propTypes = {\n\t  hotQuestionList: _react.PropTypes.shape({}).isRequired,\n\t  listenInfo: _react.PropTypes.shape({\n\t    data: _react.PropTypes.shape({}).isRequired\n\t  }).isRequired\n\t};\n\tHotQuestionList.contextTypes = {\n\t  router: _react.PropTypes.object\n\t};\n\tfunction mapStateToProps(state) {\n\t  return {\n\t    hotQuestionList: state.hotQuestionList,\n\t    listenInfo: state.listenInfo,\n\t    landPage: state.landPage\n\t  };\n\t}\n\t\n\texports.default = (0, _reactRedux.connect)(mapStateToProps)(HotQuestionList);\n\n/***/ }\n\n})\n\n\n/** WEBPACK FOOTER **\n ** 0.b143476524d2153631f0.hot-update.js\n **/","import React, {Component} from 'react'\r\nimport { Link } from 'react-router'\r\nimport Toast from \"../util/weui/toast\"\r\nimport {domain, baseUrl} from \"../../api/config\"\r\nimport {browserHistory} from 'react-router'\r\nimport apiHandler from \"../../util/apiHandler\"\r\nclass QuestionItemWithAvatar extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            loading:false\r\n        }\r\n    }\r\n    bubbleClick(answerId,questionId,isPayed){\r\n        const self = this;\r\n        if(isPayed){\r\n            browserHistory.push(`${baseUrl}question/${questionId}`)\r\n        }else{\r\n            //取预支付订单\r\n            self.props.handleLoading(true);\r\n            fetch(`${domain}/api/v1/answer/listen?answer_id=${answerId}`,{\r\n                credentials: 'same-origin'\r\n            })\r\n                .then(response => response.json())\r\n                .then(json => apiHandler.handleResponse(json,(data)=>{\r\n                    self.props.handleLoading(false);\r\n                    if(data.timeStamp!=undefined){\r\n                        const time = new Date()\r\n                        // alert('nexstate:' + data.timeStamp + '' + (time.valueOf()/1000 - data.timeStamp));\r\n                        if(time.valueOf()/1000-data.timeStamp<1000){\r\n                            console.log(\"进入微信支付\")\r\n                            // alert('enter pay');\r\n                            function onBridgeReady(){\r\n                                WeixinJSBridge.invoke(\r\n                                    'getBrandWCPayRequest', data,\r\n                                    function(res){\r\n                                        if(res.err_msg == \"get_brand_wcpay_request:ok\" ) {\r\n                                            console.log(\"支付成功！\")\r\n                                            browserHistory.push(`${baseUrl}question/${questionId}`)\r\n                                        }else{\r\n                                            // browserHistory.push(`${baseUrl}question/${questionId}`)\r\n                                            alert(\"支付失败，原因：\"+JSON.stringify(res))\r\n                                        }\r\n                                        if( document.removeEventListener ){\r\n                                            document.removeEventListener('WeixinJSBridgeReady', onBridgeReady);\r\n                                        }else if (document.attachEvent){\r\n                                            document.detachEvent('WeixinJSBridgeReady', onBridgeReady);\r\n                                            document.detachEvent('onWeixinJSBridgeReady', onBridgeReady);\r\n                                        }\r\n                                        // 使用以上方式判断前端返回,微信团队郑重提示：res.err_msg将在用户支付成功后返回    ok，但并不保证它绝对可靠。\r\n                                    }\r\n                                );\r\n                            }\r\n                            if (typeof WeixinJSBridge == \"undefined\"){\r\n                                if( document.addEventListener ){\r\n                                    document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\r\n                                }else if (document.attachEvent){\r\n                                    document.attachEvent('WeixinJSBridgeReady', onBridgeReady);\r\n                                    document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\r\n                                }\r\n                            }else{\r\n                                onBridgeReady();\r\n                            }\r\n\r\n                        }else if(data.url!=undefined){\r\n                            // this.context.router.push(`question/${self.state.curQuestionId}`)\r\n                        }\r\n                    }\r\n\r\n                }))\r\n        }\r\n    }\r\n    render() {\r\n        const { question } = this.props;\r\n        return(\r\n            <article>\r\n                <Toast icon=\"loading\" show={this.state.loading} >正在请求……</Toast>\r\n                <Link to={baseUrl +\"question/\"+question.question_id}>\r\n                    <div className=\"question-content\">\r\n                        <h4>{question.question_content}</h4>\r\n                    </div>\r\n                </Link>\r\n                <Link to={baseUrl+\"tutor/\"+question.teacher_id}>\r\n                    <div className=\"mentor\">\r\n                        <img src={question.teacher_face}/>\r\n                        <div className=\"mentor-info\">\r\n                            <span className=\"name\">{question.teacher_name}</span>\r\n                            <span>{question.user_title}</span>\r\n                        </div>\r\n                    </div>\r\n                </Link>\r\n                <div className=\"answer\" >\r\n                <span className=\"bubble\" onClick={this.bubbleClick.bind(this,question.answer_id,question.question_id,question.answer_ispayed)}>\r\n                  <span className=\"bubble-tail\"></span>\r\n                  <span className=\"bubble-voice\"></span>\r\n                  <span className=\"bubble-text\">{question.answer_ispayed?\"点击偷偷听\":\"1元偷偷听\"}</span>\r\n                </span>\r\n                </div>\r\n                <div className=\"remark\">\r\n                    <div className=\"value\">价值￥{question.question_prize}</div>\r\n                    <div className=\"remark-info\">\r\n                        <span>{question.answer_listen}人偷听</span>\r\n                        <span className=\"kui\">{question.answer_like}人觉得赞</span>\r\n                    </div>\r\n                </div>\r\n            </article>\r\n        )\r\n    }\r\n}\r\nQuestionItemWithAvatar.defaultProps = {\r\n    question:{},         //问题\r\n    handleLoading:()=>{} //控制加载\r\n}\r\nexport default QuestionItemWithAvatar;\n\n\n/** WEBPACK FOOTER **\n ** ./src/javascripts/containers/blocks/QuestionItemWithAvatar.js\n **/","/**\r\n * Created by zsh on 2016/3/11.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {getHotQuestionList} from '../actions/question.js'\r\nimport {setLandPage} from '../actions/config.js'\r\nimport Loading from \"./Loading\"\r\nimport  QuestionItemWithAvatar  from './blocks/QuestionItemWithAvatar'\r\nimport '../../stylesheets/partials/modules/HotQuestionList.scss'\r\n\r\nclass HotQuestionList extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state={\r\n      curAudio:\"\",\r\n      curPage:1,\r\n    }\r\n    this.handleScroll = this.handleScroll.bind(this)\r\n    this.handleLoading = this.handleLoading.bind(this)\r\n  }\r\n  handleScroll(){\r\n    if (window.scrollY + window.innerHeight == document.body.clientHeight && !this.props.hotQuestionList.completed) {\r\n      const curPage = ++this.state.curPage;\r\n      this.setState({curPage});\r\n      this.props.dispatch(getHotQuestionList(curPage, 10))\r\n    }\r\n  }\r\n  handleLoading(state){\r\n    this.setState({loading:state});\r\n  }\r\n  componentDidMount() {\r\n    if(this.props.landPage==null){\r\n      this.props.dispatch(setLandPage(location.href))\r\n    }\r\n    this.props.dispatch(getHotQuestionList(1, 10))\r\n    document.addEventListener('scroll', this.handleScroll);\r\n  }\r\n  componentWillUnmount(){\r\n    document.removeEventListener('scroll', this.handleScroll);\r\n    console.log(this.refs);\r\n  }\r\n  \r\n  render() {\r\n    const {hotQuestionList,listenInfo} = this.props\r\n    return (\r\n      <main className=\"hot-question-list\">\r\n        {\r\n          hotQuestionList.data.map((question, index) =>\r\n            <QuestionItemWithAvatar question = { question } key={index} handleLoading = {this.handleLoading}/>\r\n          )\r\n        }\r\n        {!hotQuestionList.completed && <Loading /> }\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\nHotQuestionList.propTypes = {\r\n  hotQuestionList: PropTypes.shape({}).isRequired,\r\n  listenInfo: PropTypes.shape({\r\n    data:PropTypes.shape({}).isRequired\r\n  }).isRequired\r\n}\r\nHotQuestionList.contextTypes = {\r\n  router: PropTypes.object\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hotQuestionList: state.hotQuestionList,\r\n    listenInfo:state.listenInfo,\r\n    landPage:state.landPage\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(HotQuestionList)\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/javascripts/containers/HotQuestionList.js\n **/"],"sourceRoot":""}