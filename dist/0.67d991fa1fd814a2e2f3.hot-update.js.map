{"version":3,"sources":["webpack:///./src/javascripts/containers/HotQuestionList.js?651f"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;;;;;;;;KAEM,e;;;AACJ,4BAAY,KAAZ,EAAkB;AAAA;;AAAA,oGACV,KADU;;AAEhB,WAAK,KAAL,GAAW;AACT,iBAAS,EADA;AAET,gBAAQ;AAFC,MAAX;AAIA,WAAK,YAAL,GAAoB,MAAK,YAAL,CAAkB,IAAlB,OAApB;AANgB;AAOjB;;;;oCACa;AACZ,WAAI,OAAO,OAAP,GAAiB,OAAO,WAAxB,IAAuC,SAAS,IAAT,CAAc,YAArD,IAAqE,CAAC,KAAK,KAAL,CAAW,eAAX,CAA2B,SAArG,EAAgH;AAC9G,aAAM,UAAU,EAAE,KAAK,KAAL,CAAW,OAA7B;AACA,cAAK,QAAL,CAAc,EAAC,gBAAD,EAAd;AACA,cAAK,KAAL,CAAW,QAAX,CAAoB,kCAAmB,OAAnB,EAA4B,EAA5B,CAApB;AACD;AACF;;;yCACmB;AAClB,WAAG,KAAK,KAAL,CAAW,QAAX,IAAqB,IAAxB,EAA6B;AAC3B,cAAK,KAAL,CAAW,QAAX,CAAoB,yBAAY,SAAS,IAArB,CAApB;AACD;AACD,YAAK,KAAL,CAAW,QAAX,CAAoB,kCAAmB,CAAnB,EAAsB,EAAtB,CAApB;AACA,gBAAS,gBAAT,CAA0B,QAA1B,EAAoC,KAAK,YAAzC;AACD;;;4CACqB;AACpB,gBAAS,mBAAT,CAA6B,QAA7B,EAAuC,KAAK,YAA5C;AACA,eAAQ,GAAR,CAAY,KAAK,IAAjB;AACD;;;8BAEQ;AAAA,oBAC8B,KAAK,KADnC;AAAA,WACA,eADA,UACA,eADA;AAAA,WACgB,UADhB,UACgB,UADhB;;AAEP,cACE;AAAA;SAAA,EAAM,WAAU,mBAAhB;SACE;AAAA;WAAA,EAAO,MAAK,SAAZ,EAAsB,MAAM,WAAW,OAAvC;WAAA;AAAA,UADF;SAGI,gBAAgB,IAAhB,CAAqB,GAArB,CAAyB,UAAC,QAAD,EAAW,KAAX;AAAA,kBACvB,kEAAwB,UAAa,QAArC,EAAgD,KAAK,KAArD,GADuB;AAAA,UAAzB,CAHJ;SAOG,CAAC,gBAAgB,SAAjB,IAA8B;AAPjC,QADF;AAWD;;;;;;AAGH,iBAAgB,SAAhB,GAA4B;AAC1B,oBAAiB,iBAAU,KAAV,CAAgB,EAAhB,EAAoB,UADX;AAE1B,eAAY,iBAAU,KAAV,CAAgB;AAC1B,WAAK,iBAAU,KAAV,CAAgB,EAAhB,EAAoB;AADC,IAAhB,EAET;AAJuB,EAA5B;AAMA,iBAAgB,YAAhB,GAA+B;AAC7B,WAAQ,iBAAU;AADW,EAA/B;AAGA,UAAS,eAAT,CAAyB,KAAzB,EAAgC;AAC9B,UAAO;AACL,sBAAiB,MAAM,eADlB;AAEL,iBAAW,MAAM,UAFZ;AAGL,eAAS,MAAM;AAHV,IAAP;AAKD;;mBAEc,yBACb,eADa,EAEb,eAFa,C","file":"0.67d991fa1fd814a2e2f3.hot-update.js","sourcesContent":["/**\r\n * Created by zsh on 2016/3/11.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport {Link,browserHistory} from 'react-router'\r\nimport {connect} from 'react-redux'\r\nimport {getHotQuestionList} from '../actions/question.js'\r\nimport {setLandPage} from '../actions/config.js'\r\nimport Loading from \"./Loading\"\r\nimport Toast from \"../util/weui/toast\"\r\nimport {baseUrl} from \"../api/config\"\r\nimport  QuestionItemWithAvatar  from './blocks/QuestionItemWithAvatar'\r\nimport '../../stylesheets/partials/modules/HotQuestionList.scss'\r\n\r\nclass HotQuestionList extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state={\r\n      curAudio:\"\",\r\n      curPage:1,\r\n    }\r\n    this.handleScroll = this.handleScroll.bind(this)\r\n  }\r\n  handleScroll(){\r\n    if (window.scrollY + window.innerHeight == document.body.clientHeight && !this.props.hotQuestionList.completed) {\r\n      const curPage = ++this.state.curPage;\r\n      this.setState({curPage});\r\n      this.props.dispatch(getHotQuestionList(curPage, 10))\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if(this.props.landPage==null){\r\n      this.props.dispatch(setLandPage(location.href))\r\n    }\r\n    this.props.dispatch(getHotQuestionList(1, 10))\r\n    document.addEventListener('scroll', this.handleScroll);\r\n  }\r\n  componentWillUnmount(){\r\n    document.removeEventListener('scroll', this.handleScroll);\r\n    console.log(this.refs);\r\n  }\r\n  \r\n  render() {\r\n    const {hotQuestionList,listenInfo} = this.props\r\n    return (\r\n      <main className=\"hot-question-list\">\r\n        <Toast icon=\"loading\" show={listenInfo.loading} >正在请求……</Toast>\r\n        {\r\n          hotQuestionList.data.map((question, index) =>\r\n            <QuestionItemWithAvatar question = { question } key={index} />\r\n          )\r\n        }\r\n        {!hotQuestionList.completed && <Loading /> }\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\nHotQuestionList.propTypes = {\r\n  hotQuestionList: PropTypes.shape({}).isRequired,\r\n  listenInfo: PropTypes.shape({\r\n    data:PropTypes.shape({}).isRequired\r\n  }).isRequired\r\n}\r\nHotQuestionList.contextTypes = {\r\n  router: PropTypes.object\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hotQuestionList: state.hotQuestionList,\r\n    listenInfo:state.listenInfo,\r\n    landPage:state.landPage\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(HotQuestionList)\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/javascripts/containers/HotQuestionList.js\n **/"],"sourceRoot":""}