{"version":3,"sources":["webpack:///0.c0f9d88ff7b58d4b545d.hot-update.js","webpack:///./src/javascripts/containers/HotQuestionList.js?651f"],"names":["webpackHotUpdate","285","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","mapStateToProps","state","hotQuestionList","listenInfo","landPage","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_reactRedux","_question","_config","_Loading","_Loading2","_toast","_toast2","_QuestionItemWithAvatar","_QuestionItemWithAvatar2","HotQuestionList","_Component","this","_this","getPrototypeOf","curAudio","curPage","handleScroll","bind","window","scrollY","innerHeight","document","body","clientHeight","completed","setState","dispatch","getHotQuestionList","setLandPage","location","href","addEventListener","removeEventListener","console","log","refs","_props","createElement","className","icon","show","loading","data","map","question","index","Component","propTypes","PropTypes","shape","isRequired","contextTypes","router","object","connect"],"mappings":"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","file":"0.c0f9d88ff7b58d4b545d.hot-update.js","sourcesContent":["webpackHotUpdate(0,{\n\n/***/ 285:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(3);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(22);\n\t\n\tvar _question = __webpack_require__(89);\n\t\n\tvar _config = __webpack_require__(197);\n\t\n\tvar _Loading = __webpack_require__(73);\n\t\n\tvar _Loading2 = _interopRequireDefault(_Loading);\n\t\n\tvar _toast = __webpack_require__(91);\n\t\n\tvar _toast2 = _interopRequireDefault(_toast);\n\t\n\tvar _QuestionItemWithAvatar = __webpack_require__(199);\n\t\n\tvar _QuestionItemWithAvatar2 = _interopRequireDefault(_QuestionItemWithAvatar);\n\t\n\t__webpack_require__(609);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by zsh on 2016/3/11.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\tvar HotQuestionList = function (_Component) {\n\t  _inherits(HotQuestionList, _Component);\n\t\n\t  function HotQuestionList(props) {\n\t    _classCallCheck(this, HotQuestionList);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HotQuestionList).call(this, props));\n\t\n\t    _this.state = {\n\t      curAudio: \"\",\n\t      curPage: 1\n\t    };\n\t    _this.handleScroll = _this.handleScroll.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(HotQuestionList, [{\n\t    key: 'handleScroll',\n\t    value: function handleScroll() {\n\t      if (window.scrollY + window.innerHeight == document.body.clientHeight && !this.props.hotQuestionList.completed) {\n\t        var curPage = ++this.state.curPage;\n\t        this.setState({ curPage: curPage });\n\t        this.props.dispatch((0, _question.getHotQuestionList)(curPage, 10));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      if (this.props.landPage == null) {\n\t        this.props.dispatch((0, _config.setLandPage)(location.href));\n\t      }\n\t      this.props.dispatch((0, _question.getHotQuestionList)(1, 10));\n\t      document.addEventListener('scroll', this.handleScroll);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      document.removeEventListener('scroll', this.handleScroll);\n\t      console.log(this.refs);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _props = this.props;\n\t      var hotQuestionList = _props.hotQuestionList;\n\t      var listenInfo = _props.listenInfo;\n\t\n\t      return _react2.default.createElement(\n\t        'main',\n\t        { className: 'hot-question-list' },\n\t        _react2.default.createElement(\n\t          _toast2.default,\n\t          { icon: 'loading', show: listenInfo.loading },\n\t          '正在请求……'\n\t        ),\n\t        hotQuestionList.data.map(function (question, index) {\n\t          return _react2.default.createElement(_QuestionItemWithAvatar2.default, { question: question, key: index });\n\t        }),\n\t        !hotQuestionList.completed && _react2.default.createElement(_Loading2.default, null)\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return HotQuestionList;\n\t}(_react.Component);\n\t\n\tHotQuestionList.propTypes = {\n\t  hotQuestionList: _react.PropTypes.shape({}).isRequired,\n\t  listenInfo: _react.PropTypes.shape({\n\t    data: _react.PropTypes.shape({}).isRequired\n\t  }).isRequired\n\t};\n\tHotQuestionList.contextTypes = {\n\t  router: _react.PropTypes.object\n\t};\n\tfunction mapStateToProps(state) {\n\t  return {\n\t    hotQuestionList: state.hotQuestionList,\n\t    listenInfo: state.listenInfo,\n\t    landPage: state.landPage\n\t  };\n\t}\n\t\n\texports.default = (0, _reactRedux.connect)(mapStateToProps)(HotQuestionList);\n\n/***/ }\n\n})\n\n\n/** WEBPACK FOOTER **\n ** 0.c0f9d88ff7b58d4b545d.hot-update.js\n **/","/**\r\n * Created by zsh on 2016/3/11.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {getHotQuestionList} from '../actions/question.js'\r\nimport {setLandPage} from '../actions/config.js'\r\nimport Loading from \"./Loading\"\r\nimport Toast from \"../util/weui/toast\"\r\nimport  QuestionItemWithAvatar  from './blocks/QuestionItemWithAvatar'\r\nimport '../../stylesheets/partials/modules/HotQuestionList.scss'\r\n\r\nclass HotQuestionList extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state={\r\n      curAudio:\"\",\r\n      curPage:1,\r\n    }\r\n    this.handleScroll = this.handleScroll.bind(this)\r\n  }\r\n  handleScroll(){\r\n    if (window.scrollY + window.innerHeight == document.body.clientHeight && !this.props.hotQuestionList.completed) {\r\n      const curPage = ++this.state.curPage;\r\n      this.setState({curPage});\r\n      this.props.dispatch(getHotQuestionList(curPage, 10))\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if(this.props.landPage==null){\r\n      this.props.dispatch(setLandPage(location.href))\r\n    }\r\n    this.props.dispatch(getHotQuestionList(1, 10))\r\n    document.addEventListener('scroll', this.handleScroll);\r\n  }\r\n  componentWillUnmount(){\r\n    document.removeEventListener('scroll', this.handleScroll);\r\n    console.log(this.refs);\r\n  }\r\n  \r\n  render() {\r\n    const {hotQuestionList,listenInfo} = this.props\r\n    return (\r\n      <main className=\"hot-question-list\">\r\n        <Toast icon=\"loading\" show={listenInfo.loading} >正在请求……</Toast>\r\n        {\r\n          hotQuestionList.data.map((question, index) =>\r\n            <QuestionItemWithAvatar question = { question } key={index} />\r\n          )\r\n        }\r\n        {!hotQuestionList.completed && <Loading /> }\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\nHotQuestionList.propTypes = {\r\n  hotQuestionList: PropTypes.shape({}).isRequired,\r\n  listenInfo: PropTypes.shape({\r\n    data:PropTypes.shape({}).isRequired\r\n  }).isRequired\r\n}\r\nHotQuestionList.contextTypes = {\r\n  router: PropTypes.object\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hotQuestionList: state.hotQuestionList,\r\n    listenInfo:state.listenInfo,\r\n    landPage:state.landPage\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(HotQuestionList)\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/javascripts/containers/HotQuestionList.js\n **/"],"sourceRoot":""}